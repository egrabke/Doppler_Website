<!DOCTYPE html>
<!-- Author: Emerson Grabke -->

<html lang = "en">
<head>
	<link rel = "stylesheet" type = "text/css" href = "css/style1.css" />
    <link rel = "stylesheet" type = "text/css" href = "css/menubar.css" />
    <link rel = "stylesheet" type = "text/css" href = "css/spectrogramstyle.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <meta charset="utf-8">
	<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="js/jquery.maphilight.js"></script>
    <script type="text/javascript" src="js/jquery.maphilight.min.js"></script>
    <script src="js/beatdetector.js"></script>
     
	<title> Abdominal Arteries - Body Sounds Archive </title>
	
	<script type="text/javascript">
		$(function() {
		$('img[usemap]').maphilight();
		});
	</script>
    
    <script type="text/javascript">
	
	var qsParm = new Array();
function qs() {
var query = window.location.search.substring(1);
var parms = query.split('&');
for (var i=0; i<parms.length; i++) {
var pos = parms[i].indexOf('=');
if (pos > 0) {
var key = parms[i].substring(0,pos);
var val = parms[i].substring(pos+1);
qsParm[key] = val;
}
}
}
	
	</script>
    
    <noscript>Your browser does not support JavaScript!</noscript>
    
    <meta name="keywords" content="Doppler, Ultrasound, Body, Sounds, Archive, Wiki, Echo, Online, Sound, Artery, Arterial, Vein, Veneous, SRI, Sunnybrook, Health, Sciences, Centre, Center, SHSC, Research, Institute, Physics, Abdomen, Abdominal, Pelvis, Pelvic">
    <meta name="description" content="Online Archive of Doppler Body Sounds">
    
</head>

<body>
<div id="banner" align="center">
<a href="index.html"><img src="image/banner.jpg" alt="banner" width="640" height="130" /></a>
</div>

<div id="nav" align="left">

	  <ul>
	    <li><a href="index.html">Home</a></li>
	    <li><a href="#" class="parent">About</a>
	      <ul>
	        <li><a href="doppler.html">Doppler Physics</a></li>
	        <li><a class="parent" href="http://sunnybrook.ca/research/content/?page=sri-ab">Sunnybrook Research Institute</a>
              <ul>
              <li><a href="http://sunnybrook.ca/research/team/member.asp?t=10&m=37&page=172">Dr. Peter Burns</a></li>
              </ul>
            </li>
          </ul>
        </li>
	    <li><a href="#" class="parent">Arterial Sounds</a>
	      <ul>
	        <li><a href="arteryhead.html" class="parent">Head and Neck</a>
               <ul>
                    <li><a href="arteryhead.html?sound=common">Common Carotid</a></li>
                    <li><a href="arteryhead.html?sound=external">External Carotid</a></li>
                    <li><a href="arteryhead.html?sound=internal">Internal Carotid</a></li>
                    <li><a href="arteryhead.html?sound=vertebral">Vertebral</a></li>
               </ul>
            </li>
	        <li><a href="arterythorax.html" class="parent">Thoracic</a>
               <ul>
                    <li><a href="arterythorax.html?sound=arch">Arch of Aorta</a></li>
                    <li><a href="arterythorax.html?sound=ascending">Ascending Aorta</a></li>
                    <li><a href="arterythorax.html?sound=brachiocephalic">Brachocephalic</a></li>
                    <li><a href="arterythorax.html?sound=thoracic">Thoracic</a></li>
               </ul>
	        <li><a href="arteryupper.html" class="parent">Upper Limbs</a>
               <ul>
                    <li><a href="arteryupper.html?sound=axillary">Axillary</a></li>
                    <li><a href="arteryupper.html?sound=brachial">Brachial</a></li>
                    <li><a href="arteryupper.html?sound=radial">Radial</a></li>
                    <li><a href="arteryupper.html?sound=ulnar">Ulnar</a></li>
                    <li><a href="arteryupper.html?sound=subclavian">Subclavian</a></li>
               </ul>
            </li>
	        <li><a href="arteryabdomen.html" class="parent">Abdominal and Pelvic</a>
               <ul>
                    <li><a href="arteryabdomen.html?sound=abdominalaorta">Abdominal Aorta</a></li>
                    <li><a href="arteryabdomen.html?sound=celiac">Celiac Trunk</a></li>
                    <li><a href="arteryabdomen.html?sound=hepatic">Common Hepatic</a></li>
                    <li><a href="arteryabdomen.html?sound=commoniliac">Common Iliac</a></li>
                    <li><a href="arteryabdomen.html?sound=externaliliac">External Iliac</a></li>
                    <li><a href="arteryabdomen.html?sound=internaliliac">Internal Iliac</a></li>
                    <li><a href="arteryabdomen.html?sound=renal">Renal</a></li>
                    <li><a href="arteryabdomen.html?sound=sma">Superior Mesenteric</a></li>
               </ul>
            </li>
	        <li><a href="arterylower.html" class="parent">Lower Limbs</a>
               <ul>
                    <li><a href="arterylower.html?sound=anterior">Anterior Tibial</a></li>
                    <li><a href="arterylower.html?sound=common">Common Femoral</a></li>
                    <li><a href="arterylower.html?sound=peroneal">Peroneal</a></li>
                    <li><a href="arterylower.html?sound=popliteal">Popliteal</a></li>
                    <li><a href="arterylower.html?sound=posterior">Posterior Tibial</a></li>
                    <li><a href="arterylower.html?sound=superficial">Superficial Femoral</a></li>
                    <li><a href="arterylower.html?sound=tibioperoneal">Tibioperoneal</a></li>
               </ul>
            </li>
          </ul>
        </li>
	    <li><a href="#" class="parent">Veneous Sounds</a>
	      <ul>
	        <li><a href="veinhead.html" class="parent">Head and Neck</a>
               <ul>
                    <li><a href="veinhead.html?sound=anterior">Anterior Jugular</a></li>
                    <li><a href="veinhead.html?sound=external">External Jugular</a></li>
                    <li><a href="veinhead.html?sound=internal">Internal Jugular</a></li>
                    <li><a href="veinhead.html?sound=vertebral">Vertebral</a></li>
               </ul>
            </li>
	        <li><a href="veinthorax.html" class="parent">Thoracic</a>
               <ul>
                    <li><a href="veinthorax.html?sound=brachiocephalic">Brachiocephalic</a></li>
                    <li><a href="veinthorax.html?sound=superior">Superior Vena Cava</a></li>
               </ul>
            </li>
	        <li><a href="veinupper.html" class="parent">Upper Limbs</a>
               <ul>
                    <li><a href="veinupper.html?sound=axillary">Axillary</a></li>
                    <li><a href="veinupper.html?sound=basilic">Basilic</a></li>
                    <li><a href="veinupper.html?sound=brachial">Brachial</a></li>
                    <li><a href="veinupper.html?sound=cephalic">Cephalic</a></li>
                    <li><a href="veinupper.html?sound=radial">Radial</a></li>
                    <li><a href="veinupper.html?sound=subclavian">Subclavian</a></li>
                    <li><a href="veinupper.html?sound=ulnar">Ulnar</a></li>
               </ul>
            </li>
	        <li><a href="veinabdomen.html" class="parent">Abdominal and Pelvic</a>
               <ul>
                    <li><a href="veinabdomen.html?sound=common">Common Iliac</a></li>
                    <li><a href="veinabdomen.html?sound=external">External Iliac</a></li>
                    <li><a href="veinabdomen.html?sound=hepatic">Hepatic</a></li>
                    <li><a href="veinabdomen.html?sound=ivc">Inferior Vena Cava</a></li>
                    <li><a href="veinabdomen.html?sound=internal">Internal Iliac</a></li>
                    <li><a href="veinabdomen.html?sound=renal">Renal</a></li>
               </ul>
            </li>
	        <li><a href="veinlower.html" class="parent">Lower Limbs</a>
               <ul>
                    <li><a href="veinlower.html?sound=anterior">Anterior Tibial</a></li>
                    <li><a href="veinlower.html?sound=femoral">Femoral</a></li>
                    <li><a href="veinlower.html?sound=great">Great Saphenous</a></li>
                    <li><a href="veinlower.html?sound=popliteal">Popliteal</a></li>
                    <li><a href="veinlower.html?sound=posterior">Posterior Tibial</a></li>
                    <li><a href="veinlower.html?sound=smalls">Small Saphenous</a></li>
               </ul>
          </li>
          </ul>
        </li>
      </ul>
	  
</div>

  <br />
  
<table border="0" align="center">
<tbody><tr><td rowspan="8">    <img src="image/arteryabdomen.gif" alt="Image of Arteries in Abdomen and Pelvis" border="0" usemap="#Map" /> <br />
  <map name="Map" id="Map">
    
    <area shape="poly" coords="296,88,302,89,303,92,304,98,306,101,307,104,299,108,294,104,293,104,294,95,294,93,295,91,295,90" alt="Celiac Trunk" title="Celiac Trunk" class="celiac" href="#" id="celiac" data-maphilight='{"groupBy":".celiac"}' />
    
    <area shape="rect" coords="78,58,180,79" href="#" alt="Celiac Trunk" class="celiac" id="celiac1" data-maphilight='{"groupBy":".celiac","fillOpacity":0}' />
    
    <area shape="poly" coords="299,108,294,104,293,105,291,108,286,111,282,114,277,116,272,119,269,120,265,121,261,122,257,122,254,121,250,118,242,112,237,107,235,105,233,102,232,99,232,91,230,90,228,90,228,96,223,92,221,92,219,95,219,97,223,100,227,105,232,110,237,115,240,118,244,121,248,124,252,126,257,127,261,128,264,128,268,126,272,125,275,124,279,121,283,119,285,118,289,116,292,114,295,111,297,109" alt="Common Hepatic Artery" id="hepatic" title="Common Hepatic Artery" href="#" class="commonhepatic" data-maphilight='{"groupBy":".commonhepatic"}' />
    
    <area shape="rect" coords="11,114,192,135" href="#" alt="Common Hepatic Artery" id="hepatic1" class="commonhepatic" data-maphilight='{"groupBy":".commonhepatic","fillOpacity":0}' />
    
    <area shape="poly" coords="312,149,312,161,316,159,319,158,326,158,329,159,333,161,338,162,341,164,343,166,347,166,350,164,353,163,357,159,357,155,354,157,350,159,347,159,338,156,331,153,328,152,327,150,329,148,331,144,333,142,337,139,339,137,342,136,344,135,347,135,350,133,348,132,347,131,347,130,349,128,347,125,344,128,343,130,341,131,339,133,335,135,332,137,329,140,326,143,324,145,322,148,320,149,318,149" id="renal" href="#" alt="Renal Artery" title="Renal Artery" class="renal" data-maphilight='{"groupBy":".renal"}' />
    
    <area shape="poly" coords="284,146,284,154,279,157,272,159,266,163,260,165,256,166,250,169,245,171,241,173,238,175,235,177,233,180,231,180,231,177,232,175,234,173,235,172,237,172,237,170,235,170,232,168,234,165,242,165,248,165,251,163,257,159,259,157,263,156,264,155,259,151,257,149,254,147,251,146,251,143,249,140,249,137,250,137,253,140,257,144,260,146,263,148,265,150,267,151,274,151,277,150,280,148" href="#" alt="Renal Artery" id="renal1" title="Renal Artery" class="renal" data-maphilight='{"groupBy":".renal"}' />
    
    <area shape="rect" coords="444,145,547,166" alt="Renal Artery" class="renal" id="renal2" href="#" data-maphilight='{"groupBy":".renal","fillOpacity":0}' />
    
    <area shape="poly" coords="312,178,309,176,308,172,306,169,304,165,303,162,301,158,300,152,298,147,298,139,299,133,290,131,290,132,289,137,289,145,290,151,292,158,294,164,295,167,296,171,299,175,300,179,303,184,306,188,308,192,310,194,312,198,316,204,321,210,326,215,330,221,334,225,336,229,337,232,338,239,335,243,332,247,328,250,326,253,323,256,321,257,321,260,324,262,326,262,328,260,333,256,335,255,335,258,334,261,332,263,330,265,329,266,329,269,330,270,332,270,333,268,335,267,336,270,337,271,340,269,340,267,339,266,339,262,340,258,341,255,342,251,344,255,345,259,345,268,344,273,342,278,341,282,340,286,341,288,344,288,344,287,345,282,345,280,346,281,348,283,348,285,351,285,352,282,352,281,350,279,349,277,348,276,349,256,351,259,355,263,358,267,360,270,362,273,363,275,363,294,364,296,365,299,366,302,367,304,368,304,368,301,369,299,371,301,373,300,374,297,373,295,375,295,375,290,370,290,368,288,368,278,370,279,374,283,376,285,376,289,377,291,378,292,381,289,380,285,384,285,384,280,379,280,374,276,368,270,362,263,358,258,355,254,352,248,350,244,349,240,348,237,351,239,355,244,361,249,366,252,371,257,375,260,377,261,378,265,380,269,382,273,383,276,385,279,387,275,386,272,385,269,385,267,388,268,390,270,392,269,391,263,387,261,384,260,381,259,379,257,374,253,369,248,365,245,363,243,360,240,357,237,355,235,359,235,362,236,366,239,370,241,375,243,379,246,384,249,386,250,389,253,392,256,394,260,395,255,394,253,394,252,398,252,398,248,390,247,388,245,384,243,379,241,374,238,369,235,363,232,361,231,366,231,371,232,379,235,384,236,390,239,395,242,398,244,400,245,400,241,399,240,397,238,396,236,400,234,400,230,397,231,394,232,393,233,391,233,389,232,386,231,386,229,389,227,393,222,392,217,389,219,387,222,385,224,384,226,382,227,380,227,376,226,369,225,364,224,356,224,352,224,346,219,339,212,332,205,324,196,318,188,314,181" href="#" alt="Superior Mesenteric Artery" id="sma" title="Superior Mesenteric Artery" class="superiormesenteric" data-maphilight='{"groupBy":".superiormesenteric"}' />
    
    <area shape="rect" coords="450,232,650,254" alt="Superior Mesenteric Artery" href="#" id="sma1" class="superiormesenteric" data-maphilight='{"groupBy":".superiormesenteric","fillOpacity":0}' />
    
    <area shape="poly" coords="308,288,280,288,282,280,284,224,292,221,292,213,284,216,284,188,284,179,284,164,284,156,284,154,284,146,285,140,285,130,284,122,285,118,289,116,292,114,295,111,297,109,299,108,300,111,304,114,307,116,308,116,310,117,312,117,312,131,310,132,311,139,312,140,312,149,312,161,312,170,312,178,309,176,308,172,306,169,304,165,303,162,301,158,300,152,298,147,298,139,299,133,290,131,290,132,289,137,289,145,290,151,292,158,294,164,295,167,296,171,299,175,300,179,303,184,306,188,308,192,310,194,312,198,311,213,307,211,306,212,303,219,303,220,310,226,311,243,310,259,310,272,308,268,305,262,302,256,301,250,300,244,298,237,298,230,290,230,290,238,290,242,292,249,293,255,295,262,297,266,300,272,303,278,306,283,308,287" alt="Abdominal Aorta" title="Abdominal Aorta" href="#" class="abdominal" id="abdominalaorta" data-maphilight='{"groupBy":".abdominal"}' />
    
    <area shape="poly" coords="294,95,294,93,295,91,295,90,296,88,302,89,303,92,304,98,306,101,307,104,309,105,312,107,312,75,310,72,307,70,305,68,302,68,302,73,296,74,296,70,295,68,292,69,290,72,289,73,288,75,286,76,286,83,286,99,288,99,290,98,292,97" href="#" alt="Abdominal Aorta" id="abdominalaorta1" title="Abdominal Aorta" class="abdominal" data-maphilight='{"groupBy":".abdominal"}' />
    
    <area shape="rect" coords="81,229,211,249" alt="Abdominal Aorta" href="#" class="abdominal" id="abdominalaorta2" data-maphilight='{"groupBy":".abdominal","fillOpacity":0}' />
    
    <area shape="poly" coords="292,316,298,322,303,328,311,338,318,346,324,353,329,360,332,364,333,367,342,380,358,380,348,365,344,357,340,350,336,345,332,338,328,333,323,326,320,321,317,318,314,314,312,308,311,304,310,300,308,295,308,288,280,288,280,290,275,297,272,302,268,309,264,314,261,320,259,325,254,331,259,351,262,347,267,342,272,337,278,330,285,322" alt="Common Iliac Artery" href="#" title="Common Iliac Artery" id="commoniliac" class="commoniliac" data-maphilight='{"groupBy":".commoniliac"}' />
    
    <area shape="poly" coords="250,336,247,340,244,346,240,352,236,356,232,363,229,369,225,376,222,382,236,384,246,373,248,368,250,362,252,358,255,355" alt="Common Iliac Artery" title="Common Iliac Artery" class="commoniliac" href="#" id="commoniliac1" data-maphilight='{"groupBy":".commoniliac"}' />
    
    <area shape="rect" coords="54,328,207,347" href="#" alt="Common Iliac Artery" id="commoniliac2" class="commoniliac" data-maphilight='{"groupBy":".commoniliac","fillOpacity":0}' />
    
    <area shape="poly" coords="333,367,342,380,342,384,340,388,338,394,337,400,335,404,333,409,332,413,329,420,321,417,321,415,323,408,326,400,328,392,330,386,331,380,332,375,333,370" alt="Internal Iliac Artery" href="#" title="Internal Iliac Artery" id="internaliliac" class="internaliliac" data-maphilight='{"groupBy":".internaliliac"}' />
    
    <area shape="poly" coords="236,384,246,373,246,376,247,381,249,388,250,394,252,400,254,407,254,412,255,423,250,428,248,427,248,423,248,419,246,414,244,408,241,400,240,396,238,391,237,387" alt="Internal Iliac Artery" href="#" title="Internal Iliac Artery" id="internaliliac1" class="internaliliac" data-maphilight='{"groupBy":".internaliliac"}' />
    
    <area shape="rect" coords="404,411,550,430" href="#" alt="Internal Iliac Artery" id="internaliliac2" class="internaliliac" data-maphilight='{"groupBy":".internaliliac","fillOpacity":0}' />
    
    <area shape="poly" coords="342,380,358,380,359,385,362,391,366,397,369,406,372,413,374,422,376,429,379,439,382,449,383,456,384,466,383,468,374,468,373,463,372,458,370,451,369,445,367,440,365,432,362,425,359,418,356,411,354,404,350,397,347,390,344,384" href="#" alt="External Iliac Artery" id="externaliliac" title="External Iliac Artery" class="externaliliac" data-maphilight='{"groupBy":".externaliliac"}' />
    
    <area shape="poly" coords="222,382,236,384,232,390,229,398,225,405,222,410,219,416,217,422,214,430,212,436,208,444,206,451,203,458,202,461,197,463,192,463,189,462,187,460,187,458,188,452,192,443,194,436,197,429,202,418,206,410,210,400,215,392,219,385" href="#" alt="External Iliac Artery" id="externaliliac1" title="External Iliac Artery" class="externaliliac" data-maphilight='{"groupBy":".externaliliac"}' />
    
    <area shape="rect" coords="33,426,180,446" alt="External Iliac Artery" href="#" class="externaliliac" id="externaliliac2" data-maphilight='{"groupBy":".externaliliac","fillOpacity":0}' />
    
  </map></td>
<th style="text-align:left">Arteries in the Abdomen and Pelvis</th></tr>
<tr><td><!--Add radio buttons here as necessary. Give them the same name but individual id's, then scroll to the bottom of the webpage-->
<!--    <input type="radio" name="audio" id="carotid">Carotid
    <input type="radio" name="audio" id="renal">Renal Artery
    <input type="radio" name="audio" id="photo">Photo 28--></td></tr>
<tr><td>
Status: <span id="status">Done</span><br /><br />
Now Playing:<br />
<span id="nowplaying">[None]</span><br />
</td></tr>
<tr><td>
<!--<div id="bpm">0.0 BPM</div>-->
<br />
Time: <span id="time">00:00:00.0 | 00:00:00.0 </span>
</td></tr>
<tr><td>
	<input type="checkbox" id="loop"><label for="loop"> Loop</label>
<!--	<input type="checkbox" id="sgrambox" checked=""><label for="sgrambox"> Spectrogram</label>-->
</td></tr>
<tr><td>
	<button class="control" id="rewind">|◀◀</button>
	<button class="control" id="toggleplay">▶</button>
</td></tr>
<tr><td>
<br>
Download Current Audio File:
	<a id="download" href="sounds/hepatic.wav"><br>Right Click -> Save Target As...</a>
</td></tr>

<div id="customAudio"></div>


</tbody></table>
<div id="container" style="position: relative; overflow: auto;">
	<canvas id="audiodatacanvas" width="234" height="160" style="background-color: #EEE; display: inline-block;"></canvas>
	<canvas id="spectrogramcanvas" width="234" height="256" style="background-color: #000; display: inline-block;"></canvas>
	<div id="cursor" style="position: absolute; top: 0px; left: -1.5px; background-color: black; width: 1px; height: 100%; border-right-width: 1px; border-left-width: 1px; border-style: none solid; border-right-color: white; border-left-color: white;"></div>
</div>

<div id="spectrogramcanvas" style="overflow: auto;">
	<canvas id="spectrum" width="1200" height="280" style="background-color: #303030; display: block;"></canvas>
</div>

<script>
(function (global) {
	'use strict';
	
		$(document).ready( function() {
		
		qsParm['sound'] = null;
		qs();
		if (qsParm['sound']) {
			
			global.document.getElementById(qsParm['sound']).click()
			
		}
	});
	
	var bd = new BeatDetektor(50, 200);
	
	var zfs = function (v) {return v > 9 ? v : '0'+v;};
	var timeStyle = function (t) {return zfs(Math.floor(t/(60*24)))+':'+zfs(Math.floor(t/60) % 60)+':'+zfs(Math.floor(t) % 60)+'.'+Math.floor(Math.floor((t % 1)*10));};
	
	var container = global.document.querySelector('#container');
	
	var audiodatacanvas = global.document.querySelector('#audiodatacanvas');
	var adc = audiodatacanvas.getContext('2d');
	var sgramcanvas = global.document.querySelector('#spectrogramcanvas');
	var sgc = sgramcanvas.getContext('2d');
	sgc.globalCompositeOperation = 'darker';
	
	var LChStyle = adc.createLinearGradient(0, 0, 0, audiodatacanvas.height/2);
	LChStyle.addColorStop(0.0, '#69F');
	LChStyle.addColorStop(0.5, '#00F');
	LChStyle.addColorStop(1.0, '#03C');
	
	var RChStyle = adc.createLinearGradient(0, audiodatacanvas.height/2, 0, audiodatacanvas.height);
	RChStyle.addColorStop(0.0, '#F09');
	RChStyle.addColorStop(0.5, 'red');
	RChStyle.addColorStop(1.0, '#900');
	
	var spectrumCanvas = global.document.querySelector('#spectrum');
	var sc = spectrumCanvas.getContext('2d');
	
	var spectrumStyle = sc.createLinearGradient(0, spectrumCanvas.height, 0, 20);
	spectrumStyle.addColorStop(0.95, '#F00');
	spectrumStyle.addColorStop(0.85, '#F90');
	spectrumStyle.addColorStop(0.60, '#9F0');
	spectrumStyle.addColorStop(0.00, '#690');
	
	var spectrumPos = -1;
	
	var statusSpan = global.document.querySelector('#status');
	var timeSpan = global.document.querySelector('#time');
	var loopBox = global.document.querySelector('#loop');
	var bpmOutput = global.document.getElementById('bpm');
	
	var acx = new (global.AudioContext || global.webkitAudioContext)();
	
	var timeratio = 30;
	
	var duration = 0;
	
	var fft = acx.createAnalyser();
	fft.smoothingTimeConstant = 0.6;
	var fftData = new Uint8Array(fft.frequencyBinCount);
	
	var frameSize = 1024;
	
	var jsnode = acx.createJavaScriptNode(1024, 1, 1);
	jsnode.connect(acx.destination);
	
	jsnode.onaudioprocess = function (e) {
		var currentTime = (e.timeStamp - startTime)/1000;
		
		if(duration === 0) return;
		
		if(currentTime > duration && source) {
			stopPlayback();
			cursor.style.left = -cursor.offsetWidth/2+'px';
			if(loop) {
				startPlayback(0);
			}
			else {
				cursor.style.left = -cursor.offsetWidth/2+'px';
				timeSpan.textContent = timeStyle(0)+' | '+timeStyle(duration);
				pausedTime = 0;
			}
		}
		else if(source) {
			cursor.style.left = Math.round((Math.min(currentTime, duration))*timeratio-cursor.offsetWidth/2-1)+"px";
			timeSpan.textContent = timeStyle(currentTime)+' | '+timeStyle(duration);
		}
		var leftChannel = e.inputBuffer.getChannelData(0);
		bd.process(acx.currentTime, leftChannel);
//		bpmOutput.textContent = bd.win_bpm_int/10+ " BPM";
		
	};
	var updateSpectrum = function () {
		
		var ratio = spectrumCanvas.width/fftData.length;
		
		sc.fillStyle = 'rgba(48, 48, 48, 0.6'+/*0.55*/')';
		sc.fillRect(0, 0, spectrumCanvas.width, spectrumCanvas.height);
		sc.fillStyle = 'rgba(255, 255, 0, 0.5)';
		sc.textAlign = 'center';
		sc.font = '10px sans-serif';
		sc.strokeStyle = 'rgba(255, 255, 255, 0.1)';
		sc.lineWidth = 1;
		sc.beginPath();
		/*for(var i=0; i < spectrumCanvas.width; i+=128) {
			sc.moveTo(i+0.5, 0);
			sc.lineTo(i+0.5, spectrumCanvas.height);
		}*/
		var odd = false;
		for(var i=55; i < 20000; i*=2) {
			var hz = i;
			var peak = (hz*fft.fftSize)/acx.sampleRate;
			sc.moveTo(Math.round(peak*ratio)+0.5, 0);
			sc.lineTo(Math.round(peak*ratio)+0.5, spectrumCanvas.height);
			if(hz >= 440)
				sc.fillText(hz+' Hz', peak*ratio+5, 10+(odd)*(10));
			odd = !odd;
		}
		
		for(var i=0; i < spectrumCanvas.height; i+=64) {
			sc.moveTo(0, spectrumCanvas.height-i+0.5);
			sc.lineTo(spectrumCanvas.width, spectrumCanvas.height-i+0.5);
		}
		sc.stroke();
		
		fft.getByteTimeDomainData(fftData);
		sc.strokeStyle = '#444';
		sc.lineWidth = 4;
		sc.beginPath();
		for(var i=0; i < fftData.length; i++) {
			sc.lineTo((i)*ratio, spectrumCanvas.height-fftData[i]);
		}
		sc.stroke();
		
		fft.getByteFrequencyData(fftData);
		sc.fillStyle = 'rgba(0, 0, 0, 0.15)';
		
		sc.strokeStyle = spectrumStyle; //'#9F0';
		sc.lineWidth = 5;
		sc.beginPath();
		sc.moveTo(-10, spectrumCanvas.height+10);
		var maxval = 0;
		var peak = [];
		for(var i=0; i < fftData.length; i+=1) {
			
			/*var mag = Math.sqrt(fftData[i]*fftData[i] + fftData[i+1]*fftData[i+1]);
			var lg = Math.log(mag);
			//mag -= lg;
			mag*= (256/360);*/
			var mag = fftData[i];
			sc.lineTo(i*ratio, spectrumCanvas.height-mag);
			//sc.lineTo((i)*ratio, spectrumCanvas.height-fftData[i]);
			if(mag > maxval && mag < Infinity) {
				maxval = Math.max(maxval, mag);
				peak = i;
			}
		}
		sc.lineTo(spectrumCanvas.width+10, spectrumCanvas.height+10);
		sc.closePath();
		sc.stroke();
		sc.fill();
		
		var hz = 1024;
		//peak = (hz*fft.fftSize)/acx.sampleRate;
		sc.strokeStyle = "rgba(255, 0, 0, 0.5)";
		sc.lineWidth = 2;
		sc.beginPath();
		sc.moveTo(Math.round(peak*ratio), spectrumCanvas.height);
		sc.lineTo(Math.round(peak*ratio), spectrumCanvas.height-maxval);
		//sc.stroke();
		sc.font = "bold 10px sans-serif";
		sc.textAlign = 'left';
		sc.fillStyle = '#F00';
		//sc.fillText("Peak: "+Math.round((peak*acx.sampleRate)/fft.fftSize)+' Hz', 200*ratio, 10);
		
		if(spectrumPos >= 0) {
			sc.strokeStyle = "rgba(0, 128, 255, 0.5)";
			sc.lineWidth = 2;
			sc.beginPath();
			sc.moveTo(Math.round(spectrumPos), spectrumCanvas.height-256);
			sc.lineTo(Math.round(spectrumPos), spectrumCanvas.height);
			sc.stroke();
			var hz = ((spectrumPos/ratio)*acx.sampleRate)/fft.fftSize;
			sc.fillStyle = '#09F';
			sc.fillText(Math.round(hz)+' Hz', spectrumPos+2, 33);
		}
	};
	
	setInterval(updateSpectrum, 1000/30);
	
	var source;
	
	var startTime = Date.now();
	
	var currentBuffer;
	
	var stopPlayback = function () {
		if(source) {
			source.noteOff(0);
			source.disconnect(0);
			fft.disconnect(0);
			//jsnode.disconnect(0);
			
			source = undefined;
		}
		togglebtn.textContent = '▶';//►';
		//cursor.style.left = -cursor.offsetWidth/2+'px';
		//timeSpan.textContent = timeStyle(0)+' | '+timeStyle(duration);
	};
	
	var startPlayback = function (offset) {
		if(currentBuffer && !source) {
			source = acx.createBufferSource();
			source.loop = true;
			source.buffer = currentBuffer;
			source.connect(fft);
			fft.connect(jsnode);
			//jsnode.connect(acx.destination);
			source.connect(acx.destination);
			source.noteGrainOn(0, offset, currentBuffer.duration-offset);
			startTime = Date.now() - offset*1000;
		}
		togglebtn.innerHTML = '&nbsp;▌▌';
	};
	
	var rewindbtn = global.document.querySelector('#rewind');
	var togglebtn = global.document.querySelector('#toggleplay');
	var customAudio = global.document.querySelector('#customAudio');
	
	var pausedTime = 0;
	
	rewindbtn.addEventListener('click', function () {
		if(source) { // Not paused
			stopPlayback();
			startPlayback(0);
		}
		else {
			stopPlayback();
			cursor.style.left = -cursor.offsetWidth/2+'px';
			timeSpan.textContent = timeStyle(0)+' | '+timeStyle(duration);
			pausedTime = 0;
		}
	}, false);
	
	togglebtn.addEventListener('click', function (e) {
		if(source) {
			pausedTime = (Date.now() - startTime)/1000;
			stopPlayback();
		}
		else if(currentBuffer && !source) {
			startPlayback(pausedTime);
			pausedTime = 0;
		}
	}, false);
	
	
	
	var loop = false;
	loopBox.addEventListener('change', function (e) {
		loop = this.checked;
	}, false);
	customAudio.addEventListener('change', function (e) {
		var btn = this;
		btn.disabled = true;
		var fr = new FileReader();
		statusSpan.textContent = 'Reading file...';
		X.abort();
		fr.onload = function () {
			statusSpan.textContent = 'Decoding audio...';
			acx.decodeAudioData(fr.result, function (buffer) {
				btn.disabled = false;
				decodeAndAnalyze(buffer);
			}, function () {
				statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
				btn.disabled = false;
			});
		};
		fr.readAsArrayBuffer(this.files[0]);
	}, false);
	container.addEventListener('mousedown', function (e) {
		var y = (e.pageY - container.offsetTop);
		if(y > audiodatacanvas.offsetHeight+sgramcanvas.offsetHeight) return; // On scrollbar
		if(currentBuffer) {
			var x = (e.pageX - container.offsetLeft + container.scrollLeft)/timeratio;
			if(x > currentBuffer.duration || x < 0) return;
			if(source) {
				stopPlayback();
				startPlayback(x);
			}
			else {
				stopPlayback();
				cursor.style.left = Math.round((Math.min(x, duration))*timeratio-cursor.offsetWidth/2-1)+"px";
				timeSpan.textContent = timeStyle(x)+' | '+timeStyle(duration);
				pausedTime = x;
			}
		}
		
		
	}, false);
	container.addEventListener('mousedown', function (e) {
		e.preventDefault();
	}, false);
	spectrumCanvas.addEventListener('mousemove', function (e) {
		spectrumPos = e.pageX - this.offsetLeft + this.parentNode.scrollLeft;
	}, false);
	spectrumCanvas.addEventListener('mouseout', function (e) {
		spectrumPos = -1;
	}, false);
	
	var waveformtimer = null;
	
	var worker = null;
	var sgramtimer = null;
	var workerMessage = function (e) {
		//sgramtimer = setTimeout(function () {
			if(!worker) return;
			if(e.data.frames) {
				for(var j=0; j < e.data.frames.length; j++) {
					(function () {
						var data = e.data.frames[j];
						
						var index = data.index;
						var frameCount = data.frameCount;
						
						if(index > 50) {
							//return;
						}
						
						
						var ratio = timeratio/data.sampleRate;
						
						var x = index*frameSize*ratio;
						for(var i=0; i < frameSize/2; i++) {
							sgc.fillStyle = 'hsl('+Math.floor((i/(frameSize/2))*360)+', '+100+'%, '+(data.spectrum[i]*150)*50+'%)';
							sgc.fillRect(x, sgramcanvas.height-(i/(frameSize/2))*sgramcanvas.height, ratio*frameSize*2, sgramcanvas.height/(frameSize/2));
						}
					}());
				}
			}
			else {
				console.log('WORKER:', e.data);
				worker.onmessage = null;
				worker.terminate();
				worker = null;
			}
		//}, 0);
	};
	
	var decodeAndAnalyze = function (buffer) {
		currentBuffer = buffer;
		stopPlayback();
		console.log('Audio data decoded');
		audiodatacanvas.width = sgramcanvas.width = buffer.length*(timeratio/buffer.sampleRate);
		
		clearTimeout(waveformtimer);
		clearTimeout(sgramtimer);
		
		if(worker) {
			worker.onmessage = null;
			worker.terminate();
			worker = null;
		}
		
		worker = new Worker('js/worker.js');
		worker.onmessage = workerMessage;
		
		adc.clearRect(0, 0, audiodatacanvas.width, audiodatacanvas.height);
		sgc.clearRect(0, 0, sgramcanvas.width, sgramcanvas.height);
		
		statusSpan.textContent = 'Done';
		duration = buffer.duration;
		
		container.scrollLeft = 0;
		cursor.style.left = -cursor.offsetWidth/2+'px';
		timeSpan.textContent = timeStyle(0)+' | '+timeStyle(duration);
		rewindbtn.disabled = false;
		togglebtn.disabled = false;
		customAudio.disabled = false;
		
		var channels = [buffer.getChannelData(0), buffer.getChannelData(1)];
		
		// Minutes
		adc.fillStyle = 'rgba(0, 0, 0, 0.05)';
		var odd = true;
		for(var i=0; i < duration/60; i+=60/60) {
			/*adc.beginPath();
			adc.moveTo(i*60*timeratio-0.5, 0);
			adc.lineTo(i*60*timeratio-0.5, audiodatacanvas.height);
			adc.stroke();*/
			if(!odd)
				adc.fillRect(i*60*timeratio, 0, 1*60*timeratio, audiodatacanvas.height);
			odd = !odd;
		}
		
		adc.strokeStyle = '#AAA';
		for(var c=0; c < channels.length; c++) {
			var data = channels[c];
			if(!data) continue;
			adc.beginPath();
			adc.moveTo(0, audiodatacanvas.height/4+(audiodatacanvas.height/2)*c+0.5);
			adc.lineTo(audiodatacanvas.width, audiodatacanvas.height/4+(audiodatacanvas.height/2)*c+0.5);
			adc.stroke();
		}
		
		var ratio = timeratio/buffer.sampleRate;
		
		var chunkSize = 16*1024;
		var offset = 0;
		var lastY = [0, 0];
		
		var maxLen = channels[0].length;
		
		var drawWaveform = function () {
			
			adc.fillStyle = 'black';
			var data = [];
			var l = Math.min(maxLen, offset+chunkSize);
			for(var c=0; c < channels.length; c++) {
				data = channels[c];
				if(!data) continue;
				var x = offset*ratio;
				adc.beginPath();
				adc.moveTo(x, audiodatacanvas.height/4+(audiodatacanvas.height/2)*c+lastY[c]*(audiodatacanvas.height/4.1));
				
				for(var i=offset; i < l; i+=2) {
					adc.lineTo(x, audiodatacanvas.height/4+(audiodatacanvas.height/2)*c+data[i]*(audiodatacanvas.height/4.1));
					//adc.fillRect(x, audiodatacanvas.height/2, 1, data[i]*(audiodatacanvas.height));
					lastY[c] = data[i];
					x = i*ratio;
					if(x > audiodatacanvas.width) break;
				}
				
				if(c === 0) adc.strokeStyle = LChStyle;
				else adc.strokeStyle = RChStyle;
				adc.stroke();
				
			}
			offset += chunkSize;
			
			if(l >= maxLen) {
				channels[0] = null;
				channels[1] = null;
				data = null;
				clearTimeout(waveformtimer);
				return;
			}
			
			waveformtimer = setTimeout(drawWaveform, 0);
		};
		
		waveformtimer = setTimeout(drawWaveform, 0);
		
		var channelData = [];
		for(var c=0; c < buffer.numberOfChannels; c++) {
			channelData[c] = channels[c];
		}
		
/*		if(global.document.getElementById('sgrambox').checked) {
			worker.postMessage({
				sampleRate: buffer.sampleRate,
				length: buffer.length,
				duration: buffer.duration,
				channelData: channelData,
				frameSize: frameSize
			});
		}
		*/
		
		startPlayback(0);
		
	};
	
	var celiac = global.document.querySelector('#celiac');
	
	celiac.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/celiactrunk.wav";
	document.getElementById("nowplaying").innerHTML = '[CeliacTrunk.wav]';
	
	var musicfile = "sounds/celiactrunk.wav"
	
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
	var celiac1 = global.document.querySelector('#celiac1');
	
	celiac1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/celiactrunk.wav";
	document.getElementById("nowplaying").innerHTML = '[CeliacTrunk.wav]';
	
	var musicfile = "sounds/celiactrunk.wav"
	
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
	var hepatic = global.document.querySelector("#hepatic");
	
	hepatic.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/hepaticartery.wav";
	document.getElementById("nowplaying").innerHTML = '[HepaticArtery.wav]';
	
	var musicfile = "sounds/hepaticartery.wav"
	
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
	var hepatic1 = global.document.querySelector("#hepatic1");
	
	hepatic1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/hepaticartery.wav";
	document.getElementById("nowplaying").innerHTML = '[HepaticArtery.wav]';
	
	var musicfile = "sounds/hepaticartery.wav"
	
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
	var renal = global.document.querySelector('#renal');
	
	renal.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/renalartery.wav";
	document.getElementById("nowplaying").innerHTML = '[RenalArtery.wav]';
	
	var musicfile = "sounds/renalartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
	var renal1 = global.document.querySelector('#renal1');
	
	renal1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/renalartery.wav";
	document.getElementById("nowplaying").innerHTML = '[RenalArtery.wav]';
	
	var musicfile = "sounds/renalartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var renal2 = global.document.querySelector('#renal2');
	
	renal2.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/renalartery.wav";
	document.getElementById("nowplaying").innerHTML = '[RenalArtery.wav]';
	
	var musicfile = "sounds/renalartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var sma = global.document.querySelector('#sma');
	
	sma.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/sma.wav";
	document.getElementById("nowplaying").innerHTML = '[SMA.wav]';
	
	var musicfile = "sounds/sma.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var sma1 = global.document.querySelector('#sma1');
	
	sma1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/sma.wav";
	document.getElementById("nowplaying").innerHTML = '[SMA.wav]';
	
	var musicfile = "sounds/sma.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var abdominalaorta = global.document.querySelector('#abdominalaorta');
	
	abdominalaorta.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/abdominalaorta.wav";
	document.getElementById("nowplaying").innerHTML = '[AbdominalAorta.wav]';
	
	var musicfile = "sounds/abdominalaorta.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var abdominalaorta1 = global.document.querySelector('#abdominalaorta1');
	
	abdominalaorta1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/abdominalaorta.wav";
	document.getElementById("nowplaying").innerHTML = '[AbdominalAorta.wav]';
	
	var musicfile = "sounds/abdominalaorta.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var abdominalaorta2 = global.document.querySelector('#abdominalaorta2');
	
	abdominalaorta2.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/abdominalaorta.wav";
	document.getElementById("nowplaying").innerHTML = '[AbdominalAorta.wav]';
	
	var musicfile = "sounds/abdominalaorta.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var commoniliac = global.document.querySelector('#commoniliac');
	
	commoniliac.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/commoniliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[CommonIliacArtery.wav]';
	
	var musicfile = "sounds/commoniliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var commoniliac1 = global.document.querySelector('#commoniliac1');
	
	commoniliac1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/commoniliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[CommonIliacArtery.wav]';
	
	var musicfile = "sounds/commoniliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var commoniliac2 = global.document.querySelector('#commoniliac2');
	
	commoniliac2.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/commoniliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[CommonIliacArtery.wav]';
	
	var musicfile = "sounds/commoniliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var internaliliac = global.document.querySelector('#internaliliac');
	
	internaliliac.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/internaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[InternalIliacArtery.wav]';
	
	var musicfile = "sounds/internaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var internaliliac1 = global.document.querySelector('#internaliliac1');
	
	internaliliac1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/internaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[InternalIliacArtery.wav]';
	
	var musicfile = "sounds/internaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var internaliliac2 = global.document.querySelector('#internaliliac2');
	
	internaliliac2.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/internaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[InternalIliacArtery.wav]';
	
	var musicfile = "sounds/internaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var externaliliac = global.document.querySelector('#externaliliac');
	
	externaliliac.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/externaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[ExternalIliacArtery.wav]';
	
	var musicfile = "sounds/externaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var externaliliac1 = global.document.querySelector('#externaliliac1');
	
	externaliliac1.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/externaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[ExternalIliacArtery.wav]';
	
	var musicfile = "sounds/externaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });

	var externaliliac2 = global.document.querySelector('#externaliliac2');
	
	externaliliac2.addEventListener('click', function () {
	
	document.getElementById("download").href="sounds/externaliliacartery.wav";
	document.getElementById("nowplaying").innerHTML = '[ExternalIliacArtery.wav]';
	
	var musicfile = "sounds/externaliliacartery.wav"
	 
	var X = new XMLHttpRequest();
	X.open('GET', musicfile, true);
	X.responseType = 'arraybuffer';
	console.log('Downloading audio...');
	statusSpan.textContent = 'Downloading...';
	X.addEventListener('load', function () {
		console.log('Decoding audio...');
		statusSpan.textContent = 'Decoding audio...';
		customAudio.disabled = true;
		acx.decodeAudioData(X.response, decodeAndAnalyze, function () {
			customAudio.disabled = false;
			statusSpan.innerHTML = '<span style="color: red">An error occurred during decoding</span>';
		});
	}, false);

	X.send();
    });
	
}(window));
</script>  

</body>
</html>